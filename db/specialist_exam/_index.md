# インデックス

## 索引の種類

｜索引名|解説|
|-|-|
|ユニーク索引|索引で指定した列の値を許さない。主キーやユニーク制約が指定された索引|
|非ユニーク索引|索引で指定した列の値を許す|
|クラスタ索引|テーブルの並び順とインデックスの並び順が一致していて、データ取得時にごそっとまとめて取得できる。<br>1つのページにアクセスしたときに一気に該当データが取れるので、物理I/Oの回数を減らすことができ、高速化される。<br>e.g. 社員番号順に並んだテーブルに対して、社員番号でインデックスが貼られているケースなど。|
|非クラスタ索引|通常、テーブルを作成するとテーブルの並びとある要素の並びは一致しない。その時指定したインデックスは、非クラスタ索引となる。非クラスタ索引では、インデックスを使ってデータポインタ(存在するページ)を検索してデータ取得するが、複数件取得しようと思うと物理的なファイルの並びとデータの並びは一致しないのでデータ1つずつに対して都度1ページを開くことになるので、物理I/Oは多少負荷がかかる。テーブルスキャンよりは(圧倒的に)物理I/Oが良い。|

## 索引のロジック

### 1.B木インデックス

### 2.B+木インデックス
- **キーの値のランダムアクセスを高速化したものだが、順次処理の高速化も可能にする**
- ランダムアクセス時
  - B木と同様に、各ノードから値の大小を判断してルートを決定して次のノードに移る
  - ノード → ノード → ... ノード → リーフ
- 順次アクセス時
  - 結果が格納されているリーフ間もリスト結合されている(連結リスト)
  - そのため、連続で値を取得したい場合は、リーフからリーフへ連結を辿っていくことで取得できる

### 3.ビットマップインデックス

### 4.ハッシュ